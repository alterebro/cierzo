function getData(){ajax().get("http://cierzo.976.es/api/").then(function(e,t){renderData(e)}).catch(function(){}).always(function(){})}function renderData(e){for(var n=[{id:"N",name:"Tramontana",from:"Norte"},{id:"NNE",name:"Tramontana",from:"Norte-Nordeste"},{id:"NE",name:"Gregal",from:"Nordeste"},{id:"ENE",name:"Levante",from:"Este-Nordeste"},{id:"E",name:"Levante",from:"Este"},{id:"ESE",name:"Levante",from:"Este-Sudeste"},{id:"SE",name:"Siroco",from:"Sudeste"},{id:"SSE",name:"Siroco",from:"Sur-Sudeste"},{id:"S",name:"Ostro",from:"Sur"},{id:"SSO",name:"Ostro",from:"Sur-Sudoeste"},{id:"SO",name:"Lebeche",from:"Sudoeste"},{id:"OSO",name:"Poniente",from:"Oeste-Sudoeste"},{id:"O",name:"Poniente",from:"Oeste"},{id:"ONO",name:"Cierzo",from:"Oeste-Noroeste"},{id:"NO",name:"Cierzo",from:"Noroeste"},{id:"NNO",name:"Cierzo",from:"Norte-Noroeste"}],r={timestamp:function(e){return new Date(1e3*e).format("d.m.Y @H:i")},hour:function(e){return new Date(1e3*e).format("Dd hA")},day:function(e){return new Date(1e3*e).format("Dd M")},wind_direction:function(e){var t=Math.floor(e/22.5+.5);return n[t%16].id},wind_string:function(e){var t=Math.floor(e/22.5+.5);t=n[t%16];var r=t.name+" del "+t.from;return r},beaufort_str:function(e){var t=beaufort(e);return t.desc},beaufort_per:function(e){var t=beaufort(e),n=Math.round(10*t.grade);return n>100?100:n}},i=document.querySelector("main");i.firstChild;)i.removeChild(i.firstChild);var o=document.querySelector("#template"),s=new t(o.innerHTML);s.register("timestamp",r.timestamp),s.register("hour",r.hour),s.register("day",r.day),s.register("wind_direction",r.wind_direction),s.register("wind_string",r.wind_string),s.register("beaufort_str",r.beaufort_str),s.register("beaufort_per",r.beaufort_per);var a=document.createElement("div");a.setAttribute("id","app"),a.innerHTML=s.render(e),document.querySelector("main").appendChild(a),router.init(),timer.init(2)}!function(e){"use strict";var t=[{speed:0,desc:{en:"Calm",es:"Calma"}},{speed:2,desc:{en:"Light air",es:"Ventolina"}},{speed:6,desc:{en:"Light breeze",es:"Brisa muy débil"}},{speed:12,desc:{en:"Gentle breeze",es:"Brisa ligera"}},{speed:20,desc:{en:"Moderate breeze",es:"Brisa moderada"}},{speed:29,desc:{en:"Fresh breeze",es:"Brisa fresca"}},{speed:39,desc:{en:"Strong breeze",es:"Brisa fuerte"}},{speed:50,desc:{en:"High wind",es:"Viento fuerte"}},{speed:62,desc:{en:"Gale",es:"Temporal"}},{speed:75,desc:{en:"Strong gale",es:"Temporal fuerte"}},{speed:89,desc:{en:"Storm",es:"Temporal duro"}},{speed:103,desc:{en:"Violent Storm",es:"Borrasca"}},{speed:118,desc:{en:"Hurricane",es:"Huracán"}}],n=function(e,t,n){var r=Math.floor(100*(n-e)/(t-e))/100;return r<0?0:r},r=function(e,r){var i=r||{},o={lang:i.lang||"es",int:i.int||!1},s=!1;t.forEach(function(t,n){t.speed>e&&!s&&(s=n)}),s=s?s-1:t.length-1;var a={desc:t[s].desc[o.lang],grade:o.int?s:s+n(t[s].speed,!!t[s+1]&&t[s+1].speed,e)};return a};"function"==typeof define&&define.amd?define(function(){return r}):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports.beaufort=r):e.beaufort=r}(this),function(){Date.shortMonths=["Ene","Feb","Mar","Apr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],Date.longMonths=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],Date.shortDays=["Dom","Lun","Mar","Mie","Jue","Vie","Sab"],Date.longDays=["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"];var e={d:function(){return(this.getDate()<10?"0":"")+this.getDate()},D:function(){return Date.shortDays[this.getDay()]},j:function(){return this.getDate()},l:function(){return Date.longDays[this.getDay()]},N:function(){return 0==this.getDay()?7:this.getDay()},S:function(){return this.getDate()%10==1&&11!=this.getDate()?"st":this.getDate()%10==2&&12!=this.getDate()?"nd":this.getDate()%10==3&&13!=this.getDate()?"rd":"th"},w:function(){return this.getDay()},z:function(){var e=new Date(this.getFullYear(),0,1);return Math.ceil((this-e)/864e5)},W:function(){var e=new Date(this.valueOf()),t=(this.getDay()+6)%7;e.setDate(e.getDate()-t+3);var n=e.valueOf();e.setMonth(0,1),4!==e.getDay()&&e.setMonth(0,1+(4-e.getDay()+7)%7);var r=1+Math.ceil((n-e)/6048e5);return r<10?"0"+r:r},F:function(){return Date.longMonths[this.getMonth()]},m:function(){return(this.getMonth()<9?"0":"")+(this.getMonth()+1)},M:function(){return Date.shortMonths[this.getMonth()]},n:function(){return this.getMonth()+1},t:function(){var e=this.getFullYear(),t=this.getMonth()+1;return 12===t&&(e=e++,t=0),new Date(e,t,0).getDate()},L:function(){var e=this.getFullYear();return e%400==0||e%100!=0&&e%4==0},o:function(){var e=new Date(this.valueOf());return e.setDate(e.getDate()-(this.getDay()+6)%7+3),e.getFullYear()},Y:function(){return this.getFullYear()},y:function(){return(""+this.getFullYear()).substr(2)},a:function(){return this.getHours()<12?"am":"pm"},A:function(){return this.getHours()<12?"AM":"PM"},B:function(){return Math.floor(1e3*((this.getUTCHours()+1)%24+this.getUTCMinutes()/60+this.getUTCSeconds()/3600)/24)},g:function(){return this.getHours()%12||12},G:function(){return this.getHours()},h:function(){return((this.getHours()%12||12)<10?"0":"")+(this.getHours()%12||12)},H:function(){return(this.getHours()<10?"0":"")+this.getHours()},i:function(){return(this.getMinutes()<10?"0":"")+this.getMinutes()},s:function(){return(this.getSeconds()<10?"0":"")+this.getSeconds()},u:function(){var e=this.getMilliseconds();return(e<10?"00":e<100?"0":"")+e},e:function(){return/\((.*)\)/.exec((new Date).toString())[1]},I:function(){for(var e=null,t=0;t<12;++t){var n=new Date(this.getFullYear(),t,1),r=n.getTimezoneOffset();if(null===e)e=r;else{if(r<e){e=r;break}if(r>e)break}}return this.getTimezoneOffset()==e|0},O:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.floor(Math.abs(this.getTimezoneOffset()/60))+(0==Math.abs(this.getTimezoneOffset()%60)?"00":(Math.abs(this.getTimezoneOffset()%60)<10?"0":"")+Math.abs(this.getTimezoneOffset()%60))},P:function(){return(-this.getTimezoneOffset()<0?"-":"+")+(Math.abs(this.getTimezoneOffset()/60)<10?"0":"")+Math.floor(Math.abs(this.getTimezoneOffset()/60))+":"+(0==Math.abs(this.getTimezoneOffset()%60)?"00":(Math.abs(this.getTimezoneOffset()%60)<10?"0":"")+Math.abs(this.getTimezoneOffset()%60))},T:function(){return this.toTimeString().replace(/^.+ \(?([^\)]+)\)?$/,"$1")},Z:function(){return 60*-this.getTimezoneOffset()},c:function(){return this.format("Y-m-d\\TH:i:sP")},r:function(){return this.toString()},U:function(){return this.getTime()/1e3}};Date.prototype.format=function(t){var n=this;return t.replace(/(\\?)(.)/g,function(t,r,i){return""===r&&e[i]?e[i].call(n):i})}}.call(this),function(e,t){"use strict";"function"==typeof define&&define.amd?define("ajax",t):"object"==typeof exports?exports=module.exports=t():e.ajax=t()}(this,function(){"use strict";function e(e){var r=["get","post","put","delete"];return e=e||{},e.baseUrl=e.baseUrl||"",e.method&&e.url?n(e.method,e.baseUrl+e.url,t(e.data),e):r.reduce(function(r,i){return r[i]=function(r,o){return n(i,e.baseUrl+r,t(o),e)},r},{})}function t(e){return e||null}function n(e,t,n,i){var s=["then","catch","always"],u=s.reduce(function(e,t){return e[t]=function(n){return e[t]=n,e},e},{}),c=new XMLHttpRequest;return c.open(e,t,!0),c.withCredentials=i.hasOwnProperty("withCredentials"),r(c,i.headers),c.addEventListener("readystatechange",o(u,c),!1),c.send(a(n)),u.abort=function(){return c.abort()},u}function r(e,t){t=t||{},i(t)||(t["Content-Type"]="application/x-www-form-urlencoded"),Object.keys(t).forEach(function(n){t[n]&&e.setRequestHeader(n,t[n])})}function i(e){return Object.keys(e).some(function(e){return"content-type"===e.toLowerCase()})}function o(e,t){return function n(){t.readyState===t.DONE&&(t.removeEventListener("readystatechange",n,!1),e.always.apply(e,s(t)),t.status>=200&&t.status<300?e.then.apply(e,s(t)):e.catch.apply(e,s(t)))}}function s(e){var t;try{t=JSON.parse(e.responseText)}catch(n){t=e.responseText}return[t,e]}function a(e){return u(e)?c(e):e}function u(e){return"[object Object]"===Object.prototype.toString.call(e)}function c(e){return Object.keys(e).reduce(function(t,n){var r=t?t+"&":"";return r+f(n)+"="+f(e[n])},"")}function f(e){return encodeURIComponent(e)}return e}),function(){function e(e){this.t=e}function t(e){return new Option(e).innerHTML.replace(/"/g,"&quot;")}function n(e,t){for(var n=t.split(".");n.length;){if(!(n[0]in e))return!1;e=e[n.shift()]}return e}function r(s,a){return s.replace(i,function(e,t,i,o,s,u,c,f){var d,h=n(a,o),l="";if(!h)return"!"==i?r(s,a):c?r(f,a):"";if(!i)return r(u,a);if("@"==i){for(d in h)h.hasOwnProperty(d)&&(a._key=d,a._val=h[d],l+=r(s,a));return delete a._key,delete a._val,l}}).replace(o,function(r,i,o){if("#"==i){var s=o.split("|");o=s[0];var u=n(a,o);if(s.length>1)for(var c=s[1].split(","),f=c.length,d=0;d<f;)e.hasOwnProperty(c[d])&&(u=e[c[d++]](u));return u}var u=n(a,o);return u||0===u?"%"==i?t(u):u:""})}var i=/\{\{(([@!]?)(.+?))\}\}(([\s\S]+?)(\{\{:\1\}\}([\s\S]+?))?)\{\{\/\1\}\}/g,o=/\{\{([=%#])(.+?)\}\}/g;e.prototype.render=function(e){return r(this.t,e)},e.prototype.register=function(t,n){return!e.hasOwnProperty(t)&&(e[t]=n)},e.prototype.unregister=function(t){if(e.hasOwnProperty(t))return delete e[t]},window.t=e}();var PhoneGap=null===document.URL.match(/^https?:/),timer={seconds:60,mins:null,tick:function(){var e=this.mins-1;this.seconds--;var t=(e<10?"0":"")+e.toString()+":"+(this.seconds<10?"0":"")+String(this.seconds);if(document.getElementById("timer-output").innerHTML="Próxima actualización de datos: "+t,this.seconds>0){var n=this;setTimeout(function(){n.tick()},1e3)}else this.mins>1?(this.seconds=60,this.init(this.mins-1)):(this.seconds=60,this.mins=null,getData())},init:function(e){this.mins=e,this.tick()}},router={current_block:null,blocks:[],activateMenu:function(){var e=this,t=document.querySelectorAll("header nav ul li a");t.forEach(function(t,n){var r=t.getAttribute("href").split("#")[1];t.setAttribute("data-block",r),t.onclick=function(t){e.showBlock(r),t.preventDefault()}})},showBlock:function(e){document.getElementById("app").className="hide";var t=this;setTimeout(function(){t.blocks.forEach(function(e){document.getElementById(e).style.display="none"}),document.getElementById(e).style.display="block",document.getElementById("app").className=""},300),document.querySelectorAll("header nav a").forEach(function(e){e.classList.remove("active")}),document.querySelector('header nav ul li a[data-block="'+e+'"]').className="active",this.current_block=e},init:function(){var e=this;e.activateMenu();var t=document.querySelectorAll("main section");t.forEach(function(t,n){e.blocks.push(t.getAttribute("id"))}),document.getElementById("loader").className="hide",this.current_block||(this.current_block=this.blocks[0]),this.showBlock(this.current_block)}};window.onload=function(){getData()},PhoneGap||(document.getElementById("google-play").className="visible",function(e,t,n,r,i,o,s){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,o=t.createElement(n),s=t.getElementsByTagName(n)[0],o.async=1,o.src=r,s.parentNode.insertBefore(o,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-63335-28","auto"),ga("send","pageview"));